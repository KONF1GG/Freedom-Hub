#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ nginx
echo "üìã –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞..."

# –ñ–¥–µ–º, –ø–æ–∫–∞ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞..."
sleep 10

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –∏–∑ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ volume
echo "üîÑ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ dist —Ñ–∞–π–ª–æ–≤..."
docker exec freedom-hub-app-1 cp -r /app/dist/* /tmp/dist/

# –°–æ–∑–¥–∞–µ–º volume –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
docker volume create freedom-hub_app-dist

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –≤ volume
docker run --rm -v freedom-hub_app-dist:/dest -v /tmp/dist:/src alpine sh -c "cp -r /src/* /dest/"

echo "‚úÖ –§–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ!"
echo "üåê –¢–µ–ø–µ—Ä—å nginx –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
